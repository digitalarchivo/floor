<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>NFT Strategy mNAV Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
body {
  font-family: Inter, system-ui, sans-serif;
  background: #f6f6f6;
  margin: 0;
  padding: 24px;
}

.container {
  max-width: 1100px;
  margin: auto;
  background: #fff;
  border: 1px solid #ddd;
}

.header {
  padding: 20px;
  border-bottom: 2px solid #000;
}

.header h1 {
  margin: 0;
  font-size: 26px;
}

.subtitle {
  color: #555;
  font-style: italic;
  margin-top: 6px;
}

.section-title {
  background: #111;
  color: #fff;
  padding: 10px 16px;
  font-weight: 600;
  font-size: 14px;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 12px 14px;
  border-bottom: 1px solid #eee;
  text-align: left;
  font-size: 14px;
}

th {
  background: #fafafa;
  font-weight: 600;
}

.tag {
  background: #ffe6e0;
  color: #c0392b;
  padding: 2px 6px;
  font-size: 12px;
  border-radius: 4px;
  margin-left: 6px;
}

.loading {
  color: #999;
  font-style: italic;
}

.footer {
  padding: 14px;
  font-size: 12px;
  color: #777;
}
</style>
</head>

<body>

<div class="container">

  <div class="header">
    <h1>Strategy Token mNAV Tracker</h1>
    <div class="subtitle">
      Strategy tokens transform illiquid NFTs into perpetual DeFi engines.
    </div>
  </div>

  <div class="section-title">
    NFT STRATEGY TOKEN MNAV ANALYSIS
  </div>

  <table>
    <thead>
      <tr>
        <th>Collection</th>
        <th>Floor Price (ETH)</th>
        <th>Market Cap (ETH)</th>
        <th>FD Market Cap (ETH)</th>
        <th>mNAV</th>
      </tr>
    </thead>
    <tbody id="nft-table">
      <tr>
        <td colspan="5" class="loading">Loading data…</td>
      </tr>
    </tbody>
  </table>

  <div class="footer">
    Data source: CoinGecko API • For informational purposes only
  </div>

</div>

<script>
const API_KEY = "CG-wsr54JajbpXGMajeRzYgZVQW";

const collections = [
  "cryptopunks",
  "meebits",
  "bored-ape-yacht-club",
  "azuki",
  "moonbirds",
  "pudgy-penguins",
  "chimpers",
  "good-vibes-club"
];

const table = document.getElementById("nft-table");

function format(num) {
  if (!num) return "—";
  return num.toLocaleString(undefined, { maximumFractionDigits: 2 });
}

async function fetchCollection(id) {
  const res = await fetch(`https://api.coingecko.com/api/v3/nfts/${id}`, {
    headers: {
      "x-cg-demo-api-key": API_KEY
    }
  });
  return res.json();
}

async function loadData() {
  table.innerHTML = "";

  for (const id of collections) {
    try {
      const data = await fetchCollection(id);

      const floor = data.floor_price?.eth;
      const marketCap = data.market_cap?.eth;
      const supply = data.total_supply;

      const fdMarketCap =
        floor && supply ? floor * supply : null;

      const mnav =
        marketCap && fdMarketCap ? fdMarketCap / marketCap : null;

      const row = document.createElement("tr");

      row.innerHTML = `
        <td>
          ${data.name}
          <span class="tag">${data.symbol?.toUpperCase()}</span>
        </td>
        <td>${format(floor)}</td>
        <td>${format(marketCap)}</td>
        <td>${format(fdMarketCap)}</td>
        <td>${mnav ? mnav.toFixed(2) + "x" : "—"}</td>
      `;

      table.appendChild(row);

    } catch (err) {
      console.error(id, err);
    }
  }
}

loadData();
</script>

</body>
</html>
